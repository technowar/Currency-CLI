#!/usr/bin/env node

var program = require( 'commander' );

program
    .version( '0.0.0' )

program
    .command( 'convert' )
    .description( 'Convert [currency A] to [currency B]' )
    .action( function ( amount, currencyA, preposition, currencyB ) {
		var req = require( 'request' );
		var key = require( '../config.json' );

		var url = 'http://currency-api.appspot.com/api/' + currencyA + '/' + currencyB + '.json?key=' + key.currencyKey;

		req( url, function ( error, response, body ) {
			if ( !error && response.statusCode === 200 ) {
				var rate = JSON.parse( body ).amount;

				console.log( currencyB.toUpperCase() + ' ' + rate * amount );
			}
		} );
    } );

program.parse( process.argv );
